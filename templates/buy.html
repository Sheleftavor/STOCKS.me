{% extends "layout.html" %}

{% block title %}
    Buy
{% endblock %}

{% block main %}
    <form action="/buy" method="post">
        <div class="form-group">
            <input autocomplete="off" autofocus class="form-control" name="Symbol" placeholder="Symbol" type="text">
        </div>
        <div class="form-group">
            <input id="share" autocomplete="off" autofocus class="form-control" name="Shares" placeholder="Shares" type="number" min="1">
        </div>
        <p id="shr"></p>
        <tr>
        <button id="shrB" class="btn btn-primary" disabled type="submit">Buy</button>
        </tr>
    </form>
    
    <script crossorigin="anonymous" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script>
        let shares = document.getElementById("share");
        let button = document.getElementById("shrB");
        shares.addEventListener('input', function() {
            $.get('/register', function() {
                if (!Number.isInteger(+shares.value)) {
                     document.getElementById("shr").innerHTML = "The Number Of Shares Must Be An Integer!";
                     button.disabled = true;
                }
                else if (shares.value == 0) {
                    button.disabled = true;
                }
                else {
                    document.getElementById("shr").innerHTML = "";
                    button.disabled = false;
                }
            });
        });
    </script>
{% endblock %}